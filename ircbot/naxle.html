<!doctype html>
<html>
<head>
	    <script type="text/javascript" src="../jquery-1.9.1.min.js"></script>
        <script src='//vrici.lojban.org:3000/socket.io/socket.io.js'></script>
        <script>
            var socket = io.connect('//vrici.lojban.org:3000');

            socket.on('welcome', function(data) {
                //$('#messages').html('<span>' + data.message + '</span>');

                //socket.emit('i am client', {data: 'foo!'});
            });
            socket.on('returner', function(data) {
                $('#messages').html('<span>' + data.message.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;") + '</span>');

                //socket.emit('i am client', {data: 'foo!'});
            });
            socket.on('time', function(data) {
                console.log(data);
                //$('#messages').html('<span>' + data.time.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;") + '</span>');
            });
            socket.on('error', function() { console.error(arguments) });
            socket.on('message', function() { console.log(arguments) });
        </script>
        <title>lo naxle be fi La Mensi</title>
</head>
<body>
<meta charset='utf-8' />
<style>
html, body{
margin: 0;
padding: 0;
}

.content{
float: left;
width: 45%;
border:none;
margin: 1em;
}

.rightcontent{
float: right;
width: 45%;
border:none
}

.hspacer{
width:5%;
float:left;
}

.clear{
clear:both;
}
</style>

<div class="content">
<span style="font: 15px arial, sans-serif;">La Mensi: through the looking glass.</span>
<br /><br />

<form id="form1" name="form1" method="post" action="">
  <textarea id="input_textarea" style="width:100%; font: 15px arial, sans-serif;" rows="8" autofocus></textarea>
  <br />
  <span style="font: 15px arial, sans-serif;">Output: </span>
</form>
<script>
//document.getElementById("default").defaultSelected = true;

/*
 *  Binding the function run_camxes() to keyup event on demo_textarea by using jQuery
 */
//setup before functions
var typingTimer;                //timer identifier
var doneTypingInterval = 400;  //time in ms, 5 second for example

$('#input_textarea').bind( "keyup",
  function(e) {
	clearTimeout(typingTimer);
    typingTimer = setTimeout(run_camxes, doneTypingInterval);
} );

$('#input_textarea').bind( "keydown",
  function(e) {
    clearTimeout(typingTimer);
  } );
  
/*$('textarea').keyup(function(e){
    if(e.keyCode == 13)
    {
        $(this).trigger("enterKey");
    }
});
*/
function run_camxes() {
	try {
	  var input = $('#input_textarea').val();
	  socket.emit('i am client', {data: input});
    } catch (e) {
      return;
    }
}
</script>
<span id='messages'></span><hr>
</div>
<div class="hspacer">&nbsp;</div>
<div class="content">
<h3>Help:</h3>
<ul>
<li>The results will appear as you type.<br/></li>
<li>Parsers: type &quot;exp:&quot; (experimental), &quot;off:&quot; (camxes), &quot;gerna:&quot; (jbofi'e), or &quot;yacc:&quot; (official yacc) followed by the text to show the structure of sentences.</li>
<li>Lojban dictionary: type &quot;language-code: word&quot;, where language code is one of jbo,en,ru,es,fr,f@,ja,de,eo,zh. This searches in both directions.</li>
<li>Type &quot;language-code:word&quot; (i.e. without a space after &quot;:&quot;) to get a shorter definition.</li>
<li>&quot;selmaho: ca'a&quot; gives &quot;CAhA&quot;, &quot;selmaho: CAhA&quot; gives &quot;bi'ai, ca'a, ...&quot;</li>
<li>&quot;rafsi: kulnu&quot; gives &quot;klu&quot;, &quot;rafsi: klu&quot; gives &quot;kulnu&quot;</li>
<li>Other conlang dictionaries: &quot;toki:&quot;, &quot;laadan:&quot;, &quot;loglan:&quot;</li>
<li>Lojban &lt;-&gt; Loglan conversion (incomplete): &quot;coi:&quot;, &quot;loi:&quot;</li>
<li>&quot;Tatoeba: klama&quot; returns a random example sentence using &quot;klama&quot;</li><!--Delayed messaging: type &quot;mensi: doi user message&quot; to send &quot;message&quot; to &quot;user&quot; when they return.-->
</ul>
</div>
<div class="hspacer">&nbsp;</div>
<div class="rightcontent"></div>
<div class="clear"></div>
</body>
</html>